<app-hero></app-hero>
<section class="relative bg-gray-100 py-24">
  <app-container customClass="!max-w-2xl ">
    <ul
      class="absolute -top-0 left-1/2 flex w-full -translate-x-1/2 -translate-y-1/2 flex-wrap justify-center gap-3 sm:gap-6"
    >
      @for (cat of categories; track cat.id) {
        <li
          class="aspect-video w-32 overflow-hidden rounded-md bg-white ring-1 ring-gray-950/10 sm:w-36 md:w-40"
        >
          <a
            routerLink="/categories/{{ cat.name }}"
            class="flex h-full w-full flex-col items-center justify-center"
          >
            <img
              src="{{ cat.thumbnail }}"
              alt="category image"
              class="h-auto w-16"
            />
            <p class="text-xs font-semibold text-gray-700 sm:text-sm">
              {{ cat.name }}
            </p>
          </a>
        </li>
      }
      <li
        class="aspect-video w-32 overflow-hidden rounded-md bg-white ring-1 ring-gray-950/10 sm:w-36 md:w-40"
      >
        <a
          routerLink="/categories"
          class="flex h-full w-full flex-col items-center justify-center"
        >
          <fa-icon
            [icon]="faEllipsisH"
            class="text-2xl font-semibold"
          ></fa-icon>
          <p class="-mt-2 text-xs font-semibold text-gray-700">More</p>
        </a>
      </li>
    </ul>
    <form
      class="flex gap-3"
      id="search"
      (submit)="onSubmit($event, input.value)"
    >
      <input
        placeholder="Enter your recipe"
        class="w-full rounded-md bg-white px-4 py-2 outline-none ring-1 ring-gray-950/10 focus-visible:ring-2 focus-visible:ring-orange-500"
        #input
      />
      <button
        type="submit"
        class="h-10 w-10 rounded-md bg-white outline-none ring-1 ring-gray-950/10 focus-visible:ring-orange-500"
      >
        <fa-icon
          [icon]="faMagnifyingGlass"
          class="text-lg md:text-xl"
        ></fa-icon>
      </button>
    </form>
    <ul class="mt-6 grid grid-cols-2 gap-3">
      @for (recipe of recipeResults; track +recipe.id) {
        <li class="relative overflow-hidden rounded-xl ring-1 ring-gray-950/10">
          <a routerLink="/recipes/{{ recipe.id }}">
            <div class="aspect-square">
              <img
                src="{{ recipe.thumbnail }}"
                alt="recipe thumbnail "
                class="h-full w-full object-cover"
              />
            </div>
            <div class="bg-white p-2 text-center">
              <p class="truncate text-sm font-semibold text-gray-800">
                {{ recipe.name }}
              </p>
            </div>
          </a>
        </li>
      }
    </ul>
    @if (loading) {
      <p class="text-center text-5xl font-bold">LOADING</p>
    }
    @if (recipeResults?.length === 0) {
      <p>No recipe found</p>
    }
  </app-container>
</section>
